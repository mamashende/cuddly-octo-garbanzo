采用ORM辅助构建数据库

数据库简要结构
#### 1. `topics` 表：

这个表用于存储不同主题（topics）的信息。

|列名|数据类型|描述|
|---|---|---|
|id|INTEGER|主题 ID，主键|
|name|TEXT|主题名称|

#### 2. `todos` 表：

这个表用于存储待办事项的信息，同时将每个待办事项与所属的主题关联起来。

| 列名         | 数据类型    | 描述             | 备注           |
| ---------- | ------- | -------------- | ------------ |
| id         | INTEGER | 待办事项 ID，主键     |              |
| text       | TEXT    | 待办事项文本         |              |
| topic_id   | INTEGER | 外键，指向 topics 表 | 后来被废弃        |
| deadline   |         |                |              |
| topic_name | TEXT    | 外键，指向 topics表  | 作为新的外键，更符合要求 |

[[2024-09-18]]

经过测试，需要完善表的内容,采用GORM支持的类型
#### 1. `topic` 表：

这个表用于存储不同主题（topic）的信息。

| 列名                | 数据类型   | 描述             |
| ----------------- | ------ | -------------- |
| id                | int    | 主题 ID，主键(自动生成) |
| topic_name        | string | 主题名称           |
| topic_description | string | 对主题的描述(可空置)    |

#### 2. `todo` 表：

这个表用于存储待办事项的信息，同时将每个待办事项与所属的主题关联起来。

| 列名           | 数据类型   | 描述            | 备注           |     |
| ------------ | ------ | ------------- | ------------ | --- |
| id           | int    | 待办事项 ID，主键    | 自动生成         |     |
| todo_title   | string | 待办事项文本        |              |     |
|              |        |               |              |     |
| deadline     | date   |               | 暂时还没有实现的功能   |     |
| topic_name   | string | 外键，指向 topics表 | 作为新的外键，更符合要求 |     |
| todo_content | string | 代办事项具体内容      |              |     |
| todo_status  | string | 此项任务的完成情况     |              |     |
[[2024-09-21]]
另一种数据库结构：
#### 1. `topic` 表：

这个表用于存储不同主题（topic）的信息。

| 列名                | 数据类型                      | 描述             |
| ----------------- | ------------------------- | -------------- |
| id                | int                       | 主题 ID，主键(自动生成) |
| topic_name        | string                    | 主题名称           |
| topic_description | string                    | 对主题的描述(可空置)    |
| todolist_ptr      | ptr(如果指向表的指针或者引用这种结构存在的话) | 指向todolist     |
 
1.topic表，存储每个topic的名称及详细信息，以及指向其对应topic的todolist表和表相关的数据信息  
2.todolist表：每个todolist表只负责存储同一个topic的todo的详细信息，每新建一个topic都会随之新建一个对应的todolist表


这种想法表面上很好，但是实际上存在非常大的问题
1.安全性问题
对于一般的数据库管理系统，表的创建与删除只有管理员有相应的权限，而这个结构下，普通用户就拥有创建任意多个todolist表的权限，这是非常危险的，一旦有SQL注入漏洞，数据安全以及服务的稳定性都难以保证

2.某些操作实现起来更困难
- 例如需要修改某个todo的topic时，需要将这条记录从原todolist移动到新todolist，而简单的todolist单表只需要更改相应的topic值即可实现

- 表的实现难度更大
如果需要在同一个模型下建立不同名称的表，很多ORM都不支持也不提倡这样的操作，
最终为了实现这种操作，可能得放弃ORM，手写SQL操作数据库，这就留下了更大的隐患，以及不利于开发迭代

综上所述，在有成熟的技术支持以及真正的性能需求的前提之前，这不是一个好的实现方式

//从某种意义上，数据库存储结构的具体实现是数据库的物理层负责的，也就是说简单的两个表的视图的物理实现或许就是上文所提到的结构，将这种结构提高到用户的视图层，反而会造成更多麻烦，因为当表结构以静态形式初始化后，物理层就可以以固定的形式最优化存储结构，但表结构在数据库提供服务的同时不停动态变化时（动态的创建与删除表），这反而是在为难物理层，造成更大的性能损失

Keep it simple ，stupid !
简单的方法，有时也是最有效的方法
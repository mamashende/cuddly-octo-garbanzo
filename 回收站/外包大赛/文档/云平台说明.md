## 1
1.功能和用途：

详细描述云平台的主要功能和使用场景。例如，数据存储、数据处理、分布式计算、应用部署等。
：（这里之前写的的文档里有，复制粘贴即可，不多赘述）

解释云平台在整个系统中的作用和重要性，以及它如何与其他组件进行协作。
：（协作部分与后面重复了）
云平台是这个系统的中枢部分，起到利用算力对外提供植物病虫害分析预警，生长状况评估服务的关键设施。

2.基础设施：

描述云平台的基础设施，包括服务器、存储系统、网络设备等。
解释云平台的可伸缩性和弹性，包括如何处理负载均衡、故障转移和自动扩展等。

：云平台运行在阿里云的云服务器组上，目前的测试机组采用8核 16GB，网络带宽为100Mib/s，存储空间1TB的标准型云服务器。目前的云服务器性能已经完全满足云平台各个模块的算力需求。
3.数据存储与处理：

说明云平台的数据存储方式和处理能力。例如，关系型数据库、NoSQL数据库、分布式文件系统等。
描述云平台的数据管理策略，包括数据备份、容灾恢复、数据一致性等。
解释云平台支持的数据处理能力，例如大数据处理、实时数据分析、机器学习等。

：云平台目前采用关系型数据库MySQL储植物生长数据,由于元生长数据中视频图片的存储空间需求较大，因此对视频图片采取了分离的独立数据库存储。
目前云平台支持快照功能，能够实现快速灾备，同时采用容器技术，对于故障模块的监控管理与修复具有快速响应能力，能够大概率减少停机事故。

4.数据安全和隐私保护：
：（这部分数据安全暂时没有什么特别的重点，毕竟只是农业数据，不是人的数据）
介绍云平台的数据安全措施和隐私保护机制。例如，数据加密、访问控制、身份认证等。
讨论云平台的安全审计和监控机制，以及如何应对潜在的安全威胁和攻击。


5.扩展性和可靠性考虑：
讨论云平台的扩展性和可靠性设计。例如，如何处理高并发请求、如何应对资源竞争等。
描述云平台的容错机制，例如故障转移、自动恢复和负载均衡策略。


6.服务和应用部署：

说明云平台支持的服务和应用部署方式。例如，容器化部署、虚拟机部署、无服务器架构等。
：云平台支持容器化部署，具有弹性响应，快速部署，自动化运维的优势。
解释云平台的自动化部署和扩展能力，以及应用版本管理和回滚策略。
：云平台采用K8s+Docker的方式组织管理提供服务的容器，在负载提高时自动化部署容器提供与负载相均衡。同时Docker技术支持对于应用版本的管理，支持版本回滚功能。

7.第三方集成：

说明云平台与其他系统或服务的集成方式和接口规范。例如，与上位机的数据交换、与外部API的集成等。
：云平台后端向下对接温室终端，采用mqtt通信方式接受上位机的数据。
后端暴露API供前端调用，采用http通信方式对接前端，传输数据为JSON形式。
前端请求后端后得到相应数据，利用vuejs搭建自适应网页，实现用户多端共同使用。


解释集成过程中可能遇到的问题和风险，以及相应的解决方案。
：
云平台的可能存在权限管理与网络流量安全问题，需要后端API的网关和鉴权模块的提供稳定可靠的服务。

8.成本管理：

讨论云平台的成本管理策略，包括资源利用率、按需扩展、费用优化等。
：初期项目实验规模较小，云平台运营成本不高，随着后期规模的不断扩大以及云平台上服务功能的进一步增加，对算力的需求将会进一步增大。我们采取按需扩展的方式稳步增加算力，减少租用云服务器带来的资金压力，也在探索新的边缘计算架构，减少云端计算压力。





深度学习
0.使用到的深度学习模型：
对于温室环境调控决策需求，用到的是RNN，而大豆叶片病虫害检测使用的是CNN

对于温室环境调控决策问题的分析：
温室环境调控的输入数据是一段时间序列内的环境参数向量，输出的是对未来温室环境一段时间的预测值与决策建议，根据历史数据对未来的走向做预测是决策与控制的前提，因此这部分是一个序列预测问题，而与之对应的模型是循环神经网络（RNN)，而更细化则是 LSTM。
关于LSTM 长短期记忆网络的一点背景介绍：长短期记忆(Long Short-Term Memory) 是具有长期记忆能力的一种时间递归神经网络(Recurrent Neural Network)。 其网络结构含有一个或多个具有可遗忘和记忆功能的单元组成。它在1997年被提出用于解决传统RNN(Recurrent Neural Network) 的随时间反向传播中权重消失的问题（vanishing gradient problem over backpropagation-through-time)，重要组成部分包括Forget Gate, Input Gate, 和 Output Gate, 分别负责决定当前输入是否被采纳，是否被长期记忆以及决定在记忆中的输入是否在当前被输出。Gated Recurrent Unit 是 LSTM 众多版本中典型的一个。因为它具有记忆性的功能，LSTM经常被用在具有时间序列特性的数据和场景中。
![[Pasted image 20240414105451.png]]
![[Pasted image 20240414105511.png]]
以上为LSTM模型的简要原理图
目前对于此模型的准确性的性能分析：
对于小规模的，有时间周期性的温室环境变化数据而言，LSTM模型能够在一段时间的训练后，对周期性做出很好的预测，在测试数据集上的预测结果能够取得70%左右的准确率，仍然具有很大的提升空间。

对于植物叶片疾病检测则问题的分析:
模型的输入的是图片数据，输出的是植物叶片图片上是否表明患有某种疾病的概率。通过概率的大小来推断是否有疾病，是很经典的图片分类问题，与之对应的模型是卷积神经网络（CNN）。这部分的模型随着近年来计算机视觉的学科发展而蓬勃发展，效果比较好的有：AlexNet，ResNet，S-CNN,F-CNN等
![[Pasted image 20240414104622.png]]
![[Pasted image 20240414104523.png]]
![[Pasted image 20240414104543.png]]


![[Pasted image 20240414104909.png]]
上图是CNN系列模型的原理图

在这里，我们使用的是开源的CNN模型，目前训练成熟的CNN模型在测试数据集上普遍有93%及以上的准确度，我们正在搜集大豆叶片疾病图片数据集，争取训练出效果更好的，更适用于大豆的模型。

1.深度学习框架和库：

选用的深度学习框架为PyTorch。
选择该框架的原因，因为其易用性、灵活性方面的优势，非常适合进行灵活的迭代开发，而且具有非常多的深度学习库的支持，也能获得更多相同开发方向的技术借鉴资料。

2.模型训练与调优：

在云平台上进行深度学习模型训练的流程和步骤。
首先选择算力足够的云服务器作为训练与部署的硬件基础，然后在云服务器上搭建PyTorch运行环境，将需要训练的模型代码从代码仓库中拉取，将模型部署到PyTorch中，准备下一步的训练


准备和预处理数据集，包括数据清洗、数据划分的过程。

对于植物叶片病虫害检测模型的训练：云平台数据库从温室终端接收植物生长数据与植物图片，数据预处理部分将数据中由于故障或误差造成的无效数据（如植物图片背景不应过于明亮，防止干扰叶片面积计算算法和叶片颜色算法的准确性）并对温室终端提出数据采集的反馈建议。然后按照数据的时间与ID划分出同一区块的不同时间的植物生长情况数据集。便于后续模型训练。

对于温室环境调控决策建议模型的训练
将数据库中存储的温室环境在时间点下的各个参数（如温度，湿度，CO2浓度，叶片面积等等）数据向量化为一个个标准化向量，便于向需要训练的LSTM模型中输入数据。


3.模型部署与推理：
将训练好的模型，提取其模型文件保存，特化模型，使其具有更高的性能，最后让模型以容器化的形式部署在云服务器上，利用云服务器的高算力与大网络带宽，提供可靠的决策建议与预警服务。作为云平台后端服务的一部分，对外提供API接口。



4.模型监控与管理：

除云主机自带的硬件性能监控外，也规划了深度学习模型的性能和运行状态实时检测模块，模型运行在Docker容器中，与外界隔离，有效防止在模型出现异常错误时影响整个云平台系统的运行。一旦监控模块发现容器中的模型无响应，则将容器重置，即可快速恢复正常服务。




